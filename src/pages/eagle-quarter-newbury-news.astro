---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("news"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const latest = posts.slice(0, 6);
---

<BaseLayout
  title="Eagle Quarter Newbury News"
  description="Latest news, planning updates and development coverage related to Eagle Quarter Newbury"
>
  <h1>Eagle Quarter Newbury News</h1>

    <div class="info-grid">
      {latest.map(post => (
        <a href={`/news/${post.slug}/`} class="news-card">
          {post.data.heroImage && (
            <img
              src={post.data.heroImage}
              alt=""
              loading="lazy"
              class="news-card-image"
            />
          )}
      <div class="news-card-body">
        <strong>{post.data.title}</strong>
        <p class="muted">{post.data.description}</p>
      </div>
    </a>
      ))}
    </div>

  <p style="margin-top:2rem">
    <a href="/news/page/1/">View all news â†’</a>
  </p>
</BaseLayout>
